<div>
  <h2 class="sidewrapper greyback">Document</h2>
  <form [formGroup]="myForm" novalidate (ngSubmit)="save()" (keydown.enter)="$event.preventDefault()">
    <div class="sidewrapper greyback">
      <div *ngIf="!search.stratId && !search.briefId">
        <app-autocomplete [typeAutocomplete]="'project'" [search]="search" [canDelete]=true [title]="" [singleChoice]=true [arrayContent]="autocompleteSearchProjects" (clearAutocomplete)="clearSearchProjects()" (getResultAutocomplete)="getResultSearchProjects($event[0])">
        </app-autocomplete>
        <app-autocomplete *ngIf="autocompleteSearchProjects.length" [typeAutocomplete]="'categorie'" [search]="search" [canDelete]=true [title]="" [singleChoice]=true [arrayContent]="autocompleteSearchCategories" (clearAutocomplete)="clearSearchCategories()"
          (getResultAutocomplete)="getResultSearchCategories($event[0])">
        </app-autocomplete>
        <app-autocomplete *ngIf="autocompleteSearchCategories.length" [typeAutocomplete]="'mission'" [search]="search" [canDelete]=true [title]="" [singleChoice]=true [arrayContent]="fetchedDocument.missions">
        </app-autocomplete>
      </div>
      <div *ngIf="search.briefId">
        <app-autocomplete [typeAutocomplete]="'brief'" [search]="search" [canDelete]=true [title]="" [singleChoice]=true [arrayContent]="fetchedDocument.briefs">
        </app-autocomplete>
      </div>
      <div *ngIf="search.stratId">
        <app-autocomplete [typeAutocomplete]="'strat'" [search]="search" [canDelete]=true [title]="" [singleChoice]=true [arrayContent]="fetchedDocument.strats">
        </app-autocomplete>
      </div>
      <mat-form-field>
        <input matInput type="text" formControlName="name" [(ngModel)]="fetchedDocument.details.name" placeholder="Name">
      </mat-form-field>
      <mat-form-field>
        <input matInput type="text" formControlName="link" [(ngModel)]="fetchedDocument.link" placeholder="link">
      </mat-form-field>
      <!--<mat-form-field>
        <input matInput class="form-control col-md-4" type="text" formControlName="description" placeholder="description" [(ngModel)]="fetchedDocument.details.description">
      </mat-form-field>--->
      <div>
        <app-picture [forms]="fetchedDocument.forms"></app-picture>
      </div>
    </div>
    <div class="sidewrapper">
      <label class="label-title">Assign Crew Members</label>
      <app-autocomplete [typeAutocomplete]="'user'" [search]="search" [canDelete]=true [title]="'Gets the work done:'" [singleChoice]=true [arrayContent]="fetchedDocument.crewMembers">
      </app-autocomplete>
      <app-autocomplete [typeAutocomplete]="'user'" [search]="search" [canDelete]=true [title]="'Reviews:'" [singleChoice]=true [arrayContent]="fetchedDocument.reviewers">
      </app-autocomplete>
    </div>
    <div class="sidewrapper valid-edit">
      <button type="submit" class="save" [disabled]="!myForm.valid">{{'Save' }}</button>
      <button *ngIf="fetchedDocument._id" type="button" class="delete" md-button (click)="openDeleteConfirmation()">
        {{'Delete' }}
      </button>
    </div>
    <div class="clearfix"></div>
  </form>
</div>
