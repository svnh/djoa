<div class="container">

  <div class="row">
    <div class="col-md-12">
      <h3>Document</h3>
      <form [formGroup]="myForm" novalidate (ngSubmit)="save()" (keydown.enter)="$event.preventDefault()">
        <div>
          <div>
            <label>Id</label> {{fetchedDocument._id}}
          </div>
        </div>
        <div>
          <div>
            <button (click)="changeCascade(i, -1, -1)" *ngFor="let itemStep of itemSteps;let i=index;" type="button" class="btn" [ngClass]="{'btn-success': i==selectedIndex0, '': i!=selectedIndex0}">
          {{itemStep.categ}}
        </button>
          </div>
          <br>
          <div *ngIf="selectedIndex0>=0">
            <button (click)="changeCascade(selectedIndex0, i, -1)" *ngFor="let itemStep of itemSteps[selectedIndex0].subCateg;let i=index;" type="button" class="btn" [ngClass]="{'btn-success': i==selectedIndex1, '': i!=selectedIndex1}">
          {{itemStep.categ}}
        </button>
          </div>
          <br>
          <div *ngIf="selectedIndex1>=0">
            <button (click)="changeCascade(selectedIndex0, selectedIndex1, i)" *ngFor="let itemStep of itemSteps[selectedIndex0].subCateg[selectedIndex1].subCateg;let i=index;" type="button" class="btn" [ngClass]="{'btn-success': i==selectedIndex2, '': i!=selectedIndex2}">
          {{itemStep.categ}}
        </button>
          </div>
        </div>


        <br>



        <div class="form-group">

          <div class="">
            <label>{{'Name' }}</label>
            <input class="form-control col-md-4" type="text" formControlName="name" [(ngModel)]="fetchedDocument.details.name" placeholder="Ref">
          </div>
          <div class="">
            <label>{{'Link' }}</label>
            <input class="form-control col-md-4" type="text" formControlName="link" [(ngModel)]="fetchedDocument.link" placeholder="link">
          </div>


        </div>
        <div class="form-group">
          <label>{{'Description' }}</label>
          <input class="form-control col-md-4" type="text" formControlName="description" placeholder="description" [(ngModel)]="fetchedDocument.details.description">
        </div>


        <!-- <app-autocomplete class="col-md-4" [typeAutocomplete]="'user'" [title]="'Customer'" [singleChoice]="'true'" [arrayContent]="fetchedDocument.clients" (getResultAutocomplete)="selectUser($event[0])">
        </app-autocomplete> -->

        <br>
        <!-- <div *ngIf="fetchedDocument._id">
        <div *ngFor="let user of fetchedDocument.clients">
          <label>{{'Quote' }}</label>

          <app-quotes [showHeader]=false [idDocument]="fetchedDocument._id" [idClient]="fetchedDocument.clients[0]._id" [showBackButton]=false [userId]="user._id" [documentId]="fetchedDocument._id">
          </app-quotes>
        </div>
      </div> -->


        <input type="date" class="form-control" formControlName="start" [(ngModel)]="fetchedDocument.dateDocument.startString">
        <input type="date" class="form-control" formControlName="end" [(ngModel)]="fetchedDocument.dateDocument.endString">







        <div class="form-group">
          {{'Status' }}
          <select class="form-control col-md-3" formControlName="status" [(ngModel)]="fetchedDocument.status">
          <option *ngFor="let n of status" [ngValue]="n.index">{{n.label}}</option>
        </select>
        </div>

        <!-- <div class="form-group">
          <app-autocomplete [typeAutocomplete]="'user'" [title]="'Assigned To'" [singleChoice]=true [search]="{isExternalUser:false}" [arrayContent]="fetchedDocument.assignedTos" (getResultAutocomplete)="selectAssignedTo($event[0])">
          </app-autocomplete>
        </div> -->
        <div class="form-group">
          <app-picture [forms]="fetchedDocument.forms"></app-picture>
        </div>
        <!-- <div *ngIf="fetchedDocument._id">
        <div class="FormGroup">
          <button type="button" class="btn btn-warning" (click)="showLogs = !showLogs">
           <i class="fa fa-calendar" aria-hidden="true"></i>
           <span>{{'Show Comments' }}</span>
          </button>

          <div *ngIf="showLogs">
            <app-comments [search]="search"></app-comments>
          </div>
        </div>

        <div class="FormGroup whtxt">
          <a class="btn btn-warning" [routerLink]="['/task/document/' + fetchedDocument._id]">
         <i class="fa fa-calendar" aria-hidden="true"></i>
         <span>{{'Tasks' }}</span>
        </a>
        </div>
        <div class="FormGroup whtxt">
          <button type="button" class="btn btn-warning" (click)="seeCalendar()">
         <i class="fa fa-calendar" aria-hidden="true"></i>
         <span>{{'See calendar' }}</span>
       </button>
        </div>
      </div> -->


        <div class="valid-edit">
          <button type="submit" class="done btn btn-success" [disabled]="!myForm.valid">{{'Save' }}</button>
          <button *ngIf="fetchedDocument._id" type="button" class="delete" md-button (click)="openDialogDelete()">
        {{'Delete' }}
      </button>
        </div>
        <div class="clearfix"></div>
      </form>
    </div>
  </div>
</div>
